<app-spinner *ngIf="loading"></app-spinner>
<div class="row mt-2">
  <div class="col-xl-12">
    <img src="../../../../assets/images/download.png" height="20" width="18" (click)="generatePDF()" style="cursor:pointer;float: right;margin-right:60px;"> 
  </div>
</div>
<div *ngIf="showStatusReport" id="content" class="container mt-3" style="border:1px solid rgba(0,0,0,.1);">
  <p style="margin-left:10px;font-size:16px;font-weight:bold;margin-top:5px;">Maintenance Status Report</p>
  <hr>
  <div style="margin-left:10px;font-weight:bold;">Site: &nbsp; <span style="font-weight:normal;">{{siteName}}</span></div>
  <div style="margin-left:10px;font-weight:bold;">Asset(s):&nbsp; <span style="display: inline-block;font-weight:normal;" *ngFor="let asset of assetName;let last = last">{{asset}} <span *ngIf="!last">, </span></span></div>
  <div class="mt-1" style="margin-left:10px;font-weight:bold;">Total Assets:&nbsp; <span style="font-weight:normal;">{{total}}</span></div>
  <hr>
 
  <kendo-chart title="Maintenance Status" style="font-size:20px;height: 300px;">
    <kendo-chart-legend position="bottom" ></kendo-chart-legend>
    <kendo-chart-series>
      <kendo-chart-series-item
        type="pie"
        [data]="pieData"
        field="value"
        categoryField="category"
        colorField="colorField"
        [labels]="{ visible: true, content: labelContent }"
      >
      </kendo-chart-series-item>
    </kendo-chart-series>
  </kendo-chart>
  <hr>
  <div >
    <table class="table table-bordered table-striped" style="text-align:center;">
      <thead>
        <tr>
          <th>Asset Name</th>
          <th>Asset Type</th>
          <th>Status</th>
          <th>Last PM Performed at (HMR)</th>
          <th>Current Hours (HMR)</th>
          <th>Next PM would be at (HMR)</th>
          <th>Hours until next (HMR)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let element of data.details">
          <td>{{element?.AssetName}}</td>
          <td>{{element?.AssetTypeName}}</td>
          <td *ngIf="element?.Status == 'Completed'" style="color:green;">{{element?.Status}}</td>
          <td *ngIf="element?.Status == 'Overdue'" style="color:red;">{{element?.Status}}</td>
          <td *ngIf="element?.Status == 'Upcoming'" style="color:yellow;">{{element?.Status}}</td>
          <td *ngIf="element?.Status == null">-</td>
          <td>{{element?.LastPerformed != null ? element?.LastPerformed : '-'}}</td>
          <td>{{element?.CurrentHMR != null ? element?.CurrentHMR : '-'}}</td>
          <td>{{element?.Next_PM != null ? element?.Next_PM : '-'}}</td>
          <td *ngIf="element?.Until_NextPM < 0" style="color: red;">{{element?.Until_NextPM}}</td>
          <td *ngIf="element?.Until_NextPM > 0" style="color: black;">{{element?.Until_NextPM}}</td>
          <td *ngIf="element?.Until_NextPM == 0" style="color: black;">{{element?.Until_NextPM}}</td>
          <td *ngIf="element?.Until_NextPM == null" style="color: black;">-</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>