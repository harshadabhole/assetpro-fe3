<div *ngIf="selectedSite == ''" class="overlay" >
    <div class="text-div">
      <div>
        <h5 *ngIf="selectedCompany == '' ">Please Select Company</h5>
        <h5 *ngIf="selectedCompany != '' ">Please Select Site</h5>
      </div>
    </div>
</div>
<div class="content">
  <app-spinner *ngIf="loading && selectedSite != '' "></app-spinner>
  <div class="map-unit-div mt-4">
    <div class="row" style="padding-right: 15px;">
        <div class="col-7">
            <app-map></app-map>
        </div>
        <div class="col-5">
          <div class="row">
            <div class="col-6">
             <div class="row " style="background: #FFFFFF; border: 1px solid #01AE4F; border-radius: 5px; opacity: 1; height: 45px;">
              <div class="col-8" style="display: flex; align-items: center;">
                <div class="online-circle" style="display: inline-block; "></div>
                <div style="margin-left:3vh; color:#01AE4F; font: normal normal bold 14px Montserrat;letter-spacing: 0px;opacity: 1;">Online Units</div>
              </div>
               <div class="vertical-line"></div>
               <div class="online-count" style="color:#01AE4F;font: normal normal bold 14px Montserrat;letter-spacing: 0px;opacity: 1;">{{onlineCount}}</div>
             </div>
            </div>
            <div class="col-6">
              <div class="row ml-1" style="background: #FFFFFF; border: 1px solid #8494A2; border-radius: 5px; opacity: 1; height: 45px;">
                <div class="col-8" style="display: flex; align-items: center;">
                  <div class="offline-circle" style="display: inline-block; "></div>
                  <div style="margin-left:3vh; color:#8494A2;font: normal normal bold 14px Montserrat;letter-spacing: 0px; opacity: 1;">Offline Units</div>
                </div>
               <div class="vertical-line1"></div>
               <div class="offline-count" style="color:#8494A2; font: normal normal bold 14px Montserrat;letter-spacing: 0px;opacity: 1;">{{offlineCount}}</div>
              </div>
            </div>
          </div>
          
            <div class="row">
              <div class="col-12 unit-counts mt-4">
                <ng-container *ngIf="!showFaultCode">
                  <div class="row">
                    <div class="col-6 mt-2">
                      <span style="font: normal normal bold 16px Montserrat;
                      letter-spacing: 0px;
                      color: #000000CC;
                      opacity: 1; font-weight:bold;">Fault Code By Charger</span>
                      <div class="mt-2 table-wrapper" *ngIf="showCharger">
                        <table class="table table-bordered table-striped">
                          <thead>
                            <tr style="background-color: #1D3D57BF;">
                              <th style="color:white;">Name</th>
                              <th style="color:white;">Count</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let element of faultCodesByCharger">
                              <td>{{element?.Name}}</td>
                              <td>{{element?.Count}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div *ngIf="!showCharger" style="margin-top: 15vh; font: normal normal 16px Montserrat;
                      letter-spacing: 0px;
                      color: #000000CC;
                      opacity: 1;">No Data Available</div>
                    </div>
                    <div class="vertical-divider"></div>
                    <div class="col-6 mt-2">
                      <span style="font: normal normal bold 16px Montserrat;letter-spacing: 0px;color: #000000CC; opacity: 1; font-weight:bold;">Fault Code By Fault Code</span>
                      <div class="mt-2 table-wrapper" *ngIf="showFault">
                        <table class="table table-bordered table-striped">
                          <thead>
                            <tr style="background-color: #1D3D57BF;">
                              <th style="color:white;">Name</th>
                              <th style="color:white;">Count</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let element of faultCodes">
                              <td>{{element?.Name}}</td>
                              <td>{{element?.Count}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div *ngIf="!showFault" style="margin-top: 15vh;font: normal normal 16px Montserrat;
                      letter-spacing: 0px;
                      color: #000000CC;
                      opacity: 1;">No Data Available</div>
                    </div>
                  </div>
                </ng-container>

                <ng-container *ngIf="showFaultCode">
                  <div class="custom-spinner">
                    <mat-progress-spinner color="accent" mode="indeterminate" diameter="55"></mat-progress-spinner>
                  </div>
                </ng-container>
              </div>
            </div>
        </div>
    </div>
  </div>
  
  <div  class="chart-div mt-4">
    <div class="row">
        <div class="chart-heading col-6 mt-2">
            Power Usage
        </div>
        <div class="col-2 mt-2"></div>
        <div class="col-4 mt-2 pr-5">
          <input type="date" class="custom-dates" [value]="date" [max]="date" (change)="onChangeDate($event)">
        </div>
    </div>
    <ng-container *ngIf="!showSpinner">
      <kendo-chart style="height: 300px; font-size:14px;">
        <kendo-chart-legend position="top" ></kendo-chart-legend>
        <kendo-chart-tooltip format="{0}" [visible]="true" [shared]="true">
        </kendo-chart-tooltip>
        <kendo-chart-category-axis>
          <kendo-chart-category-axis-item [categories]="categories" [majorGridLines]="{visible: false}" [labels]="{ rotation: -90,font: '14px Montserrat' }"></kendo-chart-category-axis-item>
        </kendo-chart-category-axis>
        <kendo-chart-value-axis>
          <kendo-chart-value-axis-item [name]="'maxKwAxis'" [title]="{ text: 'Max Kw' }" [labels]="{ position: 'start' }"></kendo-chart-value-axis-item>
          <kendo-chart-value-axis-item [name]="'numChargersAxis'" [title]="{text: 'No of Chargers'}" [labels]="{ position: 'end' }" ></kendo-chart-value-axis-item>
        </kendo-chart-value-axis>
          <kendo-chart-series>
            <kendo-chart-series-item [line]="{ style: 'smooth'}" type="area" [data]="data1" [categoryField]="'category'" [field]="'value1'" name="Max Kw" valueField="'value1'" [axis]="'maxKwAxis'"></kendo-chart-series-item>
            <kendo-chart-series-item type="bar" [data]="data2" [categoryField]="'category'" [field]="'value2'" name="No of Chargers" valueField="'value2'" [axis]="'numChargersAxis'" color="#ADD8E6" [gap]="3"></kendo-chart-series-item>
          </kendo-chart-series>
    </kendo-chart>
    </ng-container>
    <ng-container *ngIf="showSpinner">
      <div class="spinner-overlay">
        <mat-progress-spinner color="accent" mode="indeterminate" diameter="90"></mat-progress-spinner>
      </div>
    </ng-container>
  </div>
</div>